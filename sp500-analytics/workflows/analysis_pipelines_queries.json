
{
    "Defaults" : {
		"Host": "replace-with-usercode_instruqt_server",
	  "CreatedBy" : "replace-with-email",
		"ControlmServer": "IN01",
		"Application": "replace-with-usercode_SAP500",
		"SubApplication": "replace-with-usercode_SAP500",
		"OrderMethod": "Manual"
	},
   "replace-with-usercode-SP500-Refresh-to-Queries" : {
    "Type" : "Folder",
    "AWS_QuickSight_Refresh" : {
      "Type" : "Job:AWS QuickSight",
      "ConnectionProfile" : "replace-with-usercode-uc-QS-CP",
      "AWS Dataset ID" : "d409fb2a-cf47-4820-a24e-d6eca8bbef9b",
      "Refresh Type" : "Full Refresh",
      "RunAs" : "replace-with-usercode-uc-QS-CP" 
    },
    "BQ_Top_Daily_Decliners" : {
      "Type" : "Job:GCP BigQuery",
      "ConnectionProfile" : "replace-with-usercode-uc-BQ-CP",
      "Action" : "Query",
      "Run Select Query and Copy to Table" : "unchecked",
      "Query Type" : "SQL Query",
      "Copy Operation Type" : "Copy",
      "Show Load Options" : "unchecked",
      "Project Name" : "sso-gcp-dba-ctm4-pub-cc10274",
      "Dataset Name" : "sp500_dataset",
      "SQL Statement" : "CREATE OR REPLACE TABLE `sso-gcp-dba-ctm4-pub-cc10274.sp500_dataset.top_daily_decliners` AS SELECT Name, date, ROUND(((close - open) / open) * 100, 2) AS percent_change FROM `sso-gcp-dba-ctm4-pub-cc10274.sp500_dataset.sp500_clean` WHERE date = '2018-02-07' ORDER BY percent_change ASC LIMIT 10;",
      "Description" : "This query identifies the 10 stocks with the largest negative price movements (i.e., biggest losers) based on the percentage drop from open to close on the previous trading day.",
      "RunAs" : "replace-with-usercode-uc-BQ-CP",
      "Variables" : [ {
        "UCM-SOURCE_TABLES" : ""
      }, {
        "UCM-DESTINATION_TABLE" : ""
      }, {
        "UCM-LOAD_OPTION" : ""
      }, {
        "UCM-BUCKET" : ""
      }, {
        "UCM-TABLE_ID" : ""
      }, {
        "UCM-SOURCE_TABLES" : ""
      }, {
        "UCM-DESTINATION_TABLE" : ""
      }, {
        "UCM-LOAD_OPTION" : ""
      }, {
        "UCM-BUCKET" : ""
      }, {
        "UCM-TABLE_ID" : ""
      } ]
    },
    "BQ_Top_Daily_Gainers" : {
      "Type" : "Job:GCP BigQuery",
      "ConnectionProfile" : "replace-with-usercode-uc-BQ-CP",
      "Action" : "Query",
      "Run Select Query and Copy to Table" : "unchecked",
      "Query Type" : "SQL Query",
      "Copy Operation Type" : "Copy",
      "Show Load Options" : "unchecked",
      "Project Name" : "sso-gcp-dba-ctm4-pub-cc10274",
      "Dataset Name" : "sp500_dataset",
      "SQL Statement" : "CREATE OR REPLACE TABLE `sso-gcp-dba-ctm4-pub-cc10274.sp500_dataset.top_daily_gainers` AS SELECT Name, date, ROUND(((close - open) / open) * 100, 2) AS percent_change FROM `sso-gcp-dba-ctm4-pub-cc10274.sp500_dataset.sp500_clean` WHERE date = '2018-02-07' ORDER BY percent_change DESC LIMIT 10;",
      "Description" : "This query calculates the daily percentage change for each stock (from open to close) and returns the top 10 stocks with the highest gains (largest positive change) from the previous trading day.",
      "RunAs" : "replace-with-usercode-uc-BQ-CP",
      "Variables" : [ {
        "UCM-SOURCE_TABLES" : ""
      }, {
        "UCM-DESTINATION_TABLE" : ""
      }, {
        "UCM-LOAD_OPTION" : ""
      }, {
        "UCM-BUCKET" : ""
      }, {
        "UCM-TABLE_ID" : ""
      }, {
        "UCM-SOURCE_TABLES" : ""
      }, {
        "UCM-DESTINATION_TABLE" : ""
      }, {
        "UCM-LOAD_OPTION" : ""
      }, {
        "UCM-BUCKET" : ""
      }, {
        "UCM-TABLE_ID" : ""
      } ]
    },
    "BQ_Top_Most_Volatile" : {
      "Type" : "Job:GCP BigQuery",
      "ConnectionProfile" : "replace-with-usercode-uc-BQ-CP",
      "Action" : "Query",
      "Run Select Query and Copy to Table" : "unchecked",
      "Query Type" : "SQL Query",
      "Copy Operation Type" : "Copy",
      "Show Load Options" : "unchecked",
      "Project Name" : "sso-gcp-dba-ctm4-pub-cc10274",
      "Dataset Name" : "sp500_dataset",
      "SQL Statement" : "CREATE OR REPLACE TABLE `sso-gcp-dba-ctm4-pub-cc10274.sp500_dataset.top_daily_volatile` AS SELECT Name, date, ROUND(((high - low) / open) * 100, 2) AS intraday_volatility FROM `sso-gcp-dba-ctm4-pub-cc10274.sp500_dataset.sp500_clean` WHERE date = '2018-02-07' ORDER BY intraday_volatility DESC LIMIT 10;",     
      "Description" : "This query calculates the intraday price range (difference between high and low prices) for each stock and lists the top 10 most volatile stocks for the previous trading day.",
      "RunAs" : "replace-with-usercode-uc-BQ-CP",
      "Variables" : [ {
        "UCM-SOURCE_TABLES" : ""
      }, {
        "UCM-DESTINATION_TABLE" : ""
      }, {
        "UCM-LOAD_OPTION" : ""
      }, {
        "UCM-BUCKET" : ""
      }, {
        "UCM-TABLE_ID" : ""
      }, {
        "UCM-SOURCE_TABLES" : ""
      }, {
        "UCM-DESTINATION_TABLE" : ""
      }, {
        "UCM-LOAD_OPTION" : ""
      }, {
        "UCM-BUCKET" : ""
      }, {
        "UCM-TABLE_ID" : ""
      } ]
    },
  "Flow": {
            "Type": "Flow",
            "Sequence": [
                "AWS_QuickSight_Refresh",
              "BQ_Top_Daily_Decliners"       
            ]
        },
    "Flow2": {
            "Type": "Flow",
            "Sequence": [
                "AWS_QuickSight_Refresh",
              "BQ_Top_Daily_Gainers"
            ]
        },
    "Flow3": {
            "Type": "Flow",
            "Sequence": [
                "AWS_QuickSight_Refresh",
              "BQ_Top_Most_Volatile"
            ]
        }
}
}
